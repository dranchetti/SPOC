/*! SPOC 03-06-2015 */
!function(a,b,c,d,e){"use strict";c.Utils={},c.SPSite=null,c.Utils.conversion={},c.Utils.conversion.ObjToQueryString=function(a){var b="";for(var c in a)b+="&$"+c+"="+a[c];return b},c.Utils.storage={},c.Utils.storage.storageAvailable=function(){return"undefined"!=typeof Storage},c.Utils.storage.set=function(a,b,d){if(c.Utils.storage.storageAvailable()){var e=d?localStorage:sessionStorage;e.setItem(a,b===Object(b)?JSON.stringify(b):b)}},c.Utils.storage.get=function(a,b){if(c.Utils.storage.storageAvailable()){var d=b?localStorage:sessionStorage;return JSON.parse(d.getItem(a))}return null},c.Utils.storage.remove=function(a,b){if(c.Utils.storage.storageAvailable()){b?localStorage:sessionStorage;localStorage.removeItem(a)}},c.SPSite=function(a){this.url=a?a:_spPageContextInfo.webAbsoluteUrl},c.SPSite.prototype.list=function(a){var b=this,e={};return e.query=function(e){var f=b.url+"/_api/lists/getByTitle%28%27"+a+"%27%29/items";return f+=e?"?"+Utils.convertObjToQueryString(e):"",d.ajax({type:"GET",url:f,dataType:"json",complete:function(b){c.Utils.storage.set("SPOCC-listitems"+a,b)}})},e.getCached=function(a){return console.log(this),c.Utils.storage.get("SPOCC-listitems"+a)},e.create=function(a){var c={__metadata:{type:"SP.List"},BaseTemplate:100,Description:""};return a&&d.extend(c,a),d.ajax({type:"POST",url:b.url+"/_api/web/lists",data:JSON.stringify(c),headers:{Accept:"application/json;odata=verbose","X-RequestDigest":d("#__REQUESTDIGEST").val(),"Content-Type":"application/json;odata=verbose"}})},e},c.SPSite.prototype.lists=function(a){var b=this,e={};return e.query=function(e){var f=b.url+"/_api/lists/getByTitle%28%27"+a+"%27%29/";return f+=e?"?"+Utils.convertObjToQueryString(e):"",d.ajax({type:"GET",url:f,dataType:"json",complete:function(){c.Utils.storage.set("SPOCC-list"+a,data)}})},e.create=function(a){var c={__metadata:{type:"SP.List"},BaseTemplate:100,Description:""};return a&&d.extend(c,a),d.ajax({type:"POST",url:b.url+"/_api/web/lists",data:JSON.stringify(c),headers:{Accept:"application/json;odata=verbose","X-RequestDigest":d("#__REQUESTDIGEST").val(),"Content-Type":"application/json;odata=verbose"}})},e.update=function(a){console.log(a)},e}}(window,document,window.SPOC=window.SPOC||{},jQuery);